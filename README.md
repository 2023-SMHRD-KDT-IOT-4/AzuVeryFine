![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/e76e03a0-7266-4c29-97ff-2b443a98a8d7)



## 👀 서비스 소개
* 서비스명:  IoT기반 오탁수 저감장치 원격제어
* 서비스설명: 웹으로 로그인하여 오탁수 저감장치에 대해 오탁수의 유입과 유출의 원격제어 및 기능 고장에 원격 감시를 통한 운용
<br>

## 📅 프로젝트 기간
2024.02.26 ~ 2024.03.12 (4주)
<br>

## ⭐ 주요 기능
* <a href="https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/blob/fc5135a3aefc7988bdfcf7c55fb5a2ec9bde6522/src/main/java/com/example/demo/controller/MemberController.java#L49" target='_blank'>로그인</a>
* <a href="https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/blob/fc5135a3aefc7988bdfcf7c55fb5a2ec9bde6522/src/main/java/com/example/demo/controller/MemberController.java#L99" target='_blank'>회원가입</a>
* <a href="https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/blob/fc5135a3aefc7988bdfcf7c55fb5a2ec9bde6522/src/main/java/com/example/demo/controller/MemberController.java#L137" target='_blank'>회원정보수정</a>
* <a href="https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/blob/fc5135a3aefc7988bdfcf7c55fb5a2ec9bde6522/src/main/webapp/WEB-INF/views/index.jsp#L273" target='_blank'>오염도</a>
* <a href="https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/blob/fc5135a3aefc7988bdfcf7c55fb5a2ec9bde6522/src/main/webapp/WEB-INF/views/index.jsp#L110" target='_blank'>오탁수 처리량, 실시간 유입량, 일일 유입량 그래프 확인</a>
* <a href="https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/blob/fc5135a3aefc7988bdfcf7c55fb5a2ec9bde6522/src/main/webapp/WEB-INF/views/power.jsp#L111" target='_blank'>배관밸브제어</a>
* <a href="https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/blob/fc5135a3aefc7988bdfcf7c55fb5a2ec9bde6522/src/main/webapp/WEB-INF/views/precise.jsp#L51" target='_blank'>약제 투입(양조절 기능)</a>
* 카메라 실시간 확인기능
* <a href="https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/blob/fc5135a3aefc7988bdfcf7c55fb5a2ec9bde6522/src/main/resources/static/assets/js/scripts2.js#L28" target='_blank'>알람기능</a>
<br>

## ⛏ 기술스택
<table>
    <tr>
        <th>구분</th>
        <th>내용</th>
    </tr>
    <tr>
        <td>사용언어</td>
        <td>
            <img src="https://img.shields.io/badge/Java-007396?style=for-the-badge&logo=java&logoColor=white"/>
            <img src="https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=HTML5&logoColor=white"/>
            <img src="https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=CSS3&logoColor=white"/>
            <img src="https://img.shields.io/badge/JavaScript-F7DF1E?style=for-the-badge&logo=JavaScript&logoColor=white"/>
        </td>
    </tr>
    <tr>
        <td>개발도구</td>
        <td>
            <img src="https://img.shields.io/badge/Spring-6DB33F?style=for-the-badge&logo=Spring&logoColor=white"/>
            <img src="https://img.shields.io/badge/raspberrypi-A22846?style=for-the-badge&logo=raspberrypi&logoColor=white">
            <img src="https://img.shields.io/badge/VSCode-007ACC?style=for-the-badge&logo=VisualStudioCode&logoColor=white"/>
            <img src="https://img.shields.io/badge/kotlin-7F52FF?style=for-the-badge&logo=kotlin&logoColor=white"/>
        </td>
    </tr>
    <tr>
        <td>서버환경</td>
        <td>
            <img src="https://img.shields.io/badge/springboot-6DB33F?style=for-the-badge&logo=springboot&logoColor=white"/>
        </td>
    </tr>
    <tr>
        <td>데이터베이스</td>
        <td>
            <img src="https://img.shields.io/badge/mariaDB-003545?style=for-the-badge&logo=mariaDB&logoColor=white"/>
        </td>
    </tr>
    <tr>
        <td>협업도구</td>
        <td>
            <img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=GitHub&logoColor=white"/>
        </td>
    </tr>
</table>


<br>

## ⚙ 시스템 아키텍처
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/ce4aeafa-679f-4774-a5c4-bb42bbb85f48)


<br>

## 📌 회로도
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/76fbaf97-d69e-4ceb-b439-b56687cbaaec)


<br>

## 📌 SW유스케이스
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/5d739e07-0c0a-4ff0-ba0f-f3b5d67088ae)


<br>

## 📌 서비스 흐름도
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/f0a7887a-b6ed-4267-b405-c09b8ac10496)

<br>

## 📌 ER다이어그램
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/cf02b102-7f94-4b18-bea0-437496e770a3)

<br>

## 🖥 웹 화면 구성
### 메인화면
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/e32faaf6-173b-496f-9aca-89832627597f)

<br>
<ul><li>IoT오탁수 첫 화면구성</li></ul>
<br>

### 회원가입/로그인
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/716e106c-d6d5-4cac-9968-6ebc1689c06d)

<br>
<ul><li>회원 가입페이지에서 회원 가입할 수 있고 로그인 후 기능들을 사용할 수 있음</li></ul>
<br>

### 마이페이지(회원정보수정)
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/656052b9-d34e-4186-bd21-d58aa9f438a0)

<br>
<ul><li>회원 정보 수정에서 회원 정보수정 기능을 이용할 수 있음</li></ul>
<br>

### 배관 밸브 제어
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/4d653cff-c266-4bae-9312-c3524822342c)

<br>
<ul><li>기기 제어 배관 밸브 제어 페이지에서 배관을 열기(물유입) / 닫기(물유출) 상태로 전환 가능</li></ul>
<br>

### 약제 투입
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/7e78cc33-e52c-4f86-820d-82353fcf21bd)

<br>
<ul><li>약제를 어느정도나 투입할건지 입력하면 기존 양에 마이너스되어 값이 저장됨</li></ul>
<br>

### 메뉴
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/ecff9b3c-10bd-4037-94fb-c62926d81cb2)

<br>
<ul><li>다른 페이지에서 사용하고자 하는 페이지로 이동을 용이하게 메뉴를 각 페이지에 할당함</li></ul>
<br>

## 🖥 어플 화면 구성

### 회원가입/로그인
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/3f64d5cc-f696-4f0a-91f8-46ed024b17c9)

<br>
<ul><li>회원 가입페이지에서 회원 가입할 수 있고 로그인 후 기능들을 사용할 수 있음
<br>

### 그래프표시
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/ea7d39e1-0369-489a-b0e4-3888a510e906)

<br>
<ul><li>로그인 이후 그래프값이 나오게 화면구성</li></ul>
<br>
    
### 밸브제어
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/b4e8bad1-fb5d-4745-a084-80de8ffdeec6)

<br>
<ul><li>기기 제어 배관 밸브 제어 페이지에서 배관을 열기(물유입) / 닫기(물유출) 상태로 전환 가능</li></ul>
<br>
    
### 약제 투입
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/0e8b245f-6556-4e8a-b211-d7aee270af14)

<br>
<ul><li>약제를 어느정도나 투입할건지 입력하면 기존 양에 마이너스되어 값이 저장됨</li></ul>
<br>
    
### 회원 정보 수정
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/173ab331-2d08-4569-884f-3b8df15dc73f)

<br>
<ul><li>회원 정보 수정에서 회원 정보수정 기능을 이용할 수 있음</li></ul>
<br>




## 👨‍👩‍👦‍👦 팀원 역할
<table>
  <tr>
    <td align="center"><img src="https://item.kakaocdn.net/do/fd49574de6581aa2a91d82ff6adb6c0115b3f4e3c2033bfd702a321ec6eda72c" width="100" height="100"/></td>
    <td align="center"><img src="https://mb.ntdtv.kr/assets/uploads/2019/01/Screen-Shot-2019-01-08-at-4.31.55-PM-e1546932545978.png" width="100" height="100"/></td>
    <td align="center"><img src="https://github.com/2023-SMHRD-KDT-IOT-4/Repo/assets/149558578/3666a1b2-5bbb-41ba-b113-9582fef82fbb" width="100" height="100"/></td>
    <td align="center"><img src="https://github.com/2023-SMHRD-KDT-IOT-4/Repo/assets/149558578/7b108ab0-3080-4bf1-a4a8-ad15c80341b6" width="100" height="100"/></td>
    <td align="center"><img src="https://pbs.twimg.com/media/B-n6uPYUUAAZSUx.png" width="100" height="100"/></td>
      
  </tr>
  <tr>
    <td align="center"><strong>이건영</strong></td>
    <td align="center"><strong>양윤형</strong></td>
    <td align="center"><strong>조용성</strong></td>
    <td align="center"><strong>이진우</strong></td>
    <td align="center"><strong>주경훈</strong></td>


  </tr>
  
  <tr>
    <td align="center"><b>Backend</b></td>
    <td align="center"><b>Backend</b></td>  
    <td align="center"><b>Embedded</b></td>  
    <td align="center"><b>Embedded</b></td>  
    <td align="center"><b>Frontend</b></td>
  </tr>
  
  <tr>
    <td align="center"><a href="https://github.com/dlrjsdud" target='_blank'>github</a></td>
    <td align="center"><a href="https://github.com/YangYunHyeong/YunHyeong" target='_blank'>github</a></td>
    <td align="center"><a href="https://github.com/WooRiGyeoRe" target='_blank'>github</a></td>
    <td align="center"><a href="https://github.com/dlwlsdn808" target='_blank'>github</a></td>
    <td align="center"><a href="https://github.com/jukyunghun" target='_blank'>github</a></td>
  </tr>
  </table>


### 이건영
  * **프로젝트 팀장**, 퍼블리싱을 제외한 웹/앱 전반적인 기능 구현
  * SpringBoot 및 Android 프로젝트 **환경설정** 및 라이브러리 추가
  * (웹/앱) 로그인 시 **JWT**로 액세스/리프레시 토큰 발급 기능구현
  * (웹/앱) Token Provider 클래스를 통한 **토큰 생성 및 유효성 검사**, **인터셉터**를 통한 요청관리 구현
  * (웹/앱) 회원가입 주소 입력시 주소검색 **api** 사용
  * (웹/앱) **배관 밸브 제어** 프론트엔드/백엔드 및 **Remote Server 전송** 기능구현
  * (웹/앱) **실시간 및 일일** 유량 데이터 **그래프**로 출력하는 프론트엔드/백엔드 기능 구현
  * (웹/앱) ph,탁도 센서 값 높거나 전달안될 시 **사용자 알림** 프론트엔드/백엔드 기능 구현
  * (웹/앱) 약제투입 시 **투입시간/투입량 데이터베이스 저장** 기능 구현
  * (웹/앱) 사용자 경험 개선 및 비기능적 요구 달성을 위한 **다양한 비동기 통신 처리** 구현
  * (웹/앱)프로젝트 구현중 필요에 따라 데이터베이스 **테이블,컬럼 생성 및 삭제 / 데이터타입 및 제약조건 수정**
  * (웹/앱) 배관 밸브 제어 데이터 **Spring to Remote Server 전달** 기능구현
  * **JPA** 라이브러리, Hibernate를 이용한 데이터베이스 연결 및 **JPQL, Native Query** 사용
  * 각 센서에서 받은 데이터 파싱하여 http통신을 통해 **Remote Server to Spring 전달** 기능구현

### 양윤형

 #####  웹 담당
* 회원가입 기능
* 밸브 잠금/잠금 해제 기능
* 오염도 그래프 표시 기능
* 유입량 그래프 표시 기능
##### 코틀린(앱)
* 로그인/회원가입화면 구현
* 회원가입 기능
* 그래프 표시 서브
* 메뉴 버튼 표시


### 조용성
  * 임베디드 회로 구성 및 수정
  * 임베디드 제어 코드 파이썬으로 작성 및 수정
  * Ph센서, 탁도 센서, 유량계 데이터 웹 서버에 전달하는 기능 구현
  * 웹 서버에서 보내는 제어명령 작동 기능 구현
  * 단말과 리모트서버 LoRa 무선통신 기능 구현
  * 웹 서버와 리모트 서버 간 와이파이 통신 기능 구현
  * 시뮬레이션 인베디드 장치 제작

### 이진우

### 주경훈
  * 웹 전체 페이지 구축 및 수정
  * Dashboard 템플릿 선정
  * CSS 활용 레이아웃 구축
  * Chart.js 활용 데이터 시각화
  * UI & UX 개선
  * UI 디자인 호환성 체크
  * 사용자 인터랙션 기능 추가
  
  

## 🤾‍♂️ 트러블슈팅
### ● 문제1
![image](https://github.com/2023-SMHRD-KDT-IOT-4/AzuVeryFine/assets/152847507/c69ca3a9-bd4c-48bc-bdaa-78ec59522fe8)

<ol>
    <li>LoRa 모듈을 이용한 센서값을 받는 단말기(디바이스)와 리모트 서버 간 무선통신 시도중 
반복 조건문에의해 구문오류 및 블락모드에 빠져 통신 오류 ->콜론(:) 표시 추가로 인하여 구문오류 및 블락모드 해결 </li>
    <li>ESP32 d1 r32 -> Arduino UNO+wifi 모듈 => ESP32 d1 r32의 접근성 부족으로 인해 프로젝트 기간준수를 위한 접근성이 좋은 UNO보드+wifi모듈로 변경</li>

</ol> 
<ul><li>느낀점 - 문제가 생길거라 생각하지 못한 IoT에서 많은 문제를 겪고, 생각보다 더 많은 시간을 투자하며 기획단계 및 프로젝트 진행 순서의 중요성을 느낌</li></ul>
